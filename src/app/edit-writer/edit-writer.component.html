<app-note-dialog (closeDialogAndDeleteChanges)="closeDialogAndDeleteChanges($event)" *ngIf="dialogFormGroup !== null"
  (closeDialog)="closeDialog()" [formGroup]="dialogFormGroup">
</app-note-dialog>
<div class="edit-writer-wrapper">
  <form [formGroup]="writerForm" class="page-grid">
    <div class="profile-image-section inner-grid">
      <input (change)="onAddProfileImage($event.target.files[0])" id="profileImage" style="display:none;" type="file"
        accept="image/*" value="הוסף תמונת פרופיל" class="circle-image">
      <label for="profileImage" class="bold-text">
        <img *ngIf="writerForm.controls.profileImage.value" [src]="writerForm.controls.profileImage.value"
          class="profile-image">
        הוסף תמונת פרופיל
      </label>
    </div>
    <div class="personal-detail-section inner-grid">
      <div class="section-title">פרטים אישיים</div>
      <p (click)="openDialog(writerForm)" class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
      <input placeholder="שם פרטי" formControlName="firstName">
      <input placeholder="שם משפחה" formControlName="lastName">
      <input placeholder="טלפון" formControlName="telephone">
      <input placeholder="טלפון נוסף" formControlName="secondTelephone">
      <input placeholder="אימייל" formControlName="email">
      <input list="cities" placeholder="עיר" formControlName="city">
      <datalist id="cities">
        <option *ngFor="let city of citiesFromDB" [value]="city.city">
      </datalist>
      <input placeholder="רחוב" formControlName="street">
      <input placeholder="מספר בנין" formControlName="streetNumber">
      <input placeholder="מספר בית" formControlName="apartmentNumber">
    </div>
    <div class="start-date-section">
      <app-hebrew-date-form-control [parentForm]="writerForm"></app-hebrew-date-form-control>
    </div>
    <div formGroupName="isAppropriate" class="is-appropriate-section">
      <div class="is-appropriate-radio-buttons-wraper inner-grid">
        <div class="section-title">
          מידת התאמה
        </div>
        <div [ngClass]="{'checked': writerForm.get(['isAppropriate', 'level']).value === 'לא מתאים'}">
          <label>
            <input type="radio" formControlName="level" value="לא מתאים">
            1
          </label>
        </div>
        <div [ngClass]="{'checked': writerForm.get(['isAppropriate', 'level']).value === 'מתאים'}">
          <label>
            <input type="radio" formControlName="level" value="מתאים">
            2
          </label>
        </div>
        <div [ngClass]="{'checked': writerForm.get(['isAppropriate', 'level']).value === 'כדאי מאוד'}">
          <label>
            <input type="radio" formControlName="level" value="כדאי מאוד">
            3
          </label>
        </div>
      </div>
    </div>
    <div formGroupName="pricesDeatails" class="price-deatail-section inner-grid">
      <div class="section-title">
        מחירים
      </div>
      <div class="type-of-price-selection-wrapper inner-grid-2">
        <div [ngClass]="{'checked': writerForm.get(['pricesDeatails','isPricePerPage']).value === 'מחיר לעמוד'}">
          <label>
            <input type="radio" formControlName="isPricePerPage" value='מחיר לעמוד'>
            מחיר לעמוד
          </label>
        </div>
        <div [ngClass]="{'checked': writerForm.get(['pricesDeatails','isPricePerPage']).value === 'מחיר לספר תורה'}">
          <label>
            <input type="radio" formControlName="isPricePerPage" value='מחיר לספר תורה'>
            מחיר לספר תורה
          </label>
        </div>
      </div>
      <div class="prices-input-wrapper inner-grid-2">
        <div formGroupName="priceForTorahScroll" class="price-for-item inner-grid-2">
          <input [placeholder]="writerForm.get(['pricesDeatails','isPricePerPage']).value" formControlName="price">
          <div class="worth-it-buttons-wrapper inner-grid-2">
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForTorahScroll', 'worthIt']).value === 'false'}"
              class="size-checkbox">
              <img src="../../assets/icons/x.png" alt="">
              <input type="radio" formControlName="worthIt" value='false'>
            </label>
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForTorahScroll', 'worthIt']).value === 'true'}"
              class="size-checkbox">
              <img src="../../assets/icons/v.png" alt="">
              <input type="radio" formControlName="worthIt" value='true'>
            </label>
            <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['pricesDeatails', 'priceForTorahScroll'])))"
              class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          </div>
        </div>
        <div formGroupName="priceForMezuzah" class="price-for-item inner-grid-2">
          <input placeholder="מחיר למזוזה" formControlName="price">
          <div class="worth-it-buttons-wrapper inner-grid-2">
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForMezuzah', 'worthIt']).value === 'false'}"
              class="size-checkbox">
              <img src="../../assets/icons/x.png" alt="">
              <input type="radio" formControlName="worthIt" value='false'>
            </label>
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForMezuzah', 'worthIt']).value === 'true'}"
              class="size-checkbox">
              <img src="../../assets/icons/v.png" alt="">
              <input type="radio" formControlName="worthIt" value='true'>
            </label>
            <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['pricesDeatails', 'priceForMezuzah'])))"
              class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          </div>
        </div>
        <div formGroupName="priceForTefillin" class="price-for-item inner-grid-2">
          <input placeholder="מחיר לתפילין" formControlName="price">
          <div class="worth-it-buttons-wrapper inner-grid-2">
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForTefillin', 'worthIt']).value === 'false'}"
              class="size-checkbox">
              <img src="../../assets/icons/x.png" alt="">
              <input type="radio" formControlName="worthIt" value='false'>
            </label>
            <label
              [ngClass]="{'checked': writerForm.get(['pricesDeatails', 'priceForTefillin', 'worthIt']).value === 'true'}"
              class="size-checkbox">
              <img src="../../assets/icons/v.png" alt="">
              <input type="radio" formControlName="worthIt" value='true'>
            </label>
            <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['pricesDeatails', 'priceForTefillin'])))"
              class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          </div>
        </div>
      </div>
    </div>
    <div formGroupName="writingDeatails" class="writing-detail-section inner-grid">

      <div formGroupName="writingLevel" class="writing-level inner-grid-2">
        <div class="section-title">
          דרגת כתיבה
        </div>
        <div class="number-button-wrapper inner-grid-2">
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['writingDeatails', 'writingLevel'])))"
            class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingLevel', 'level']).value === 'זול'}">
            <label>
              <input type="radio" formControlName="level" value="זול">
              1
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingLevel', 'level']).value === 'פחותה'}">
            <label>
              <input type="radio" formControlName="level" value="פחותה">
              2
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingLevel', 'level']).value === 'בינוני'}">
            <label>
              <input type="radio" formControlName="level" value="בינוני">
              3
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingLevel', 'level']).value === 'גבוהה'}">
            <label>
              <input type="radio" formControlName="level" value="גבוהה">
              4
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingLevel', 'level']).value === 'מיוחד'}">
            <label>
              <input type="radio" formControlName="level" value="מיוחד">
              5
            </label>
          </div>
        </div>
      </div>
      <div formGroupName="stabilityLevel" class="stability-level inner-grid-2">
        <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['writingDeatails', 'stabilityLevel'])))"
          ass="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
        <div class="section-title">
          יציבות
        </div>
        <div class="number-button-wrapper inner-grid-2">
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'stabilityLevel', 'level']).value === '1'}">
            <label>
              <input type="radio" formControlName="level" value="1">
              1
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'stabilityLevel', 'level']).value === '2'}">
            <label>
              <input type="radio" formControlName="level" value="2">
              2
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'stabilityLevel', 'level']).value === '3'}">
            <label>
              <input type="radio" formControlName="level" value="3">
              3
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'stabilityLevel', 'level']).value === '4'}">
            <label>
              <input type="radio" formControlName="level" value="4">
              4
            </label>
          </div>
          <div [ngClass]="{'checked': writerForm.get(['writingDeatails', 'stabilityLevel', 'level']).value === '5'}">
            <label>
              <input type="radio" formControlName="level" value="5">
              5
            </label>
          </div>
        </div>
      </div>
      <div formGroupName="eraseLevel" class="erase-level inner-grid-2">
        <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['writingDeatails', 'eraseLevel'])))"
          ass="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
        <div class="section-title">
          מחיקה
        </div>
        <div class="number-button-wrapper inner-grid-2">
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'eraseLevel', 'level']).value === '1'}">
              <input type="radio" formControlName="level" value="1">
              1
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'eraseLevel', 'level']).value === '2'}">
              <input type="radio" formControlName="level" value="2">
              2
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'eraseLevel', 'level']).value === '3'}">
              <input type="radio" formControlName="level" value="3">
              3
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'eraseLevel', 'level']).value === '4'}">
              <input type="radio" formControlName="level" value="4">
              4
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'eraseLevel', 'level']).value === '5'}">
              <input type="radio" formControlName="level" value="5">
              5
            </label>
          </div>
        </div>
      </div>
      <div class="letter-sizes-wrapper">
        <div formGroupName="letterSizes" class="inner-grid-2">
          <div class="section-title">
            גודל הכתב
          </div>
          <div class="sizes-row inner-grid-2">
            <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['writingDeatails', 'letterSizes'])))"
              class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '17']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="17">
              17
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '24']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="24"> 24
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '30']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="30"> 30
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '36']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="36"> 36
            </label>
          </div>
          <div class="sizes-row inner-grid-2">
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '40']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="40"> 40
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '42']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="42"> 42
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '45']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="45"> 45
            </label>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'letterSizes', '48']).value}"
              class="size-checkbox">
              <input type="checkbox" formControlName="48"> 48
            </label>
          </div>
        </div>
      </div>
      <div formGroupName="writingTypes">
        <div formGroupName="types" class="writing-types inner-grid-2">
          <div class="section-title">
            סוג הכתב
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingTypes', 'types', 'ari']).value}"
              class="box-checkbox">
              אר"י
              <input type="checkbox" formControlName="ari">
            </label>
          </div>
          <div>
            <label
              [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingTypes', 'types', 'beitYosef']).value}"
              class="box-checkbox">
              בית יוסף
              <input type="checkbox" formControlName="beitYosef">
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['writingDeatails', 'writingTypes', 'types', 'Welish']).value}"
              class="box-checkbox">
              וועליש
              <input type="checkbox" formControlName="Welish">
            </label>
          </div>
        </div>
      </div>
    </div>
    <div formGroupName="communityDeatails">
      <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['communityDeatails'])))" class="note"><img src="../../assets/icons/Edit.svg" alt="">
      </p>
      <input list="communities" placeholder="קהילה" formControlName="community" class="full-width">
      <datalist id="communities">
        <option *ngFor="let community of communitiesFromDB" [value]="community">
      </datalist>
    </div>
    <div formGroupName="placeOfWriting" class="writing-location-section inner-grid">
      <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['placeOfWriting'])))" class="note"><img src="../../assets/icons/Edit.svg" alt="">
      </p>
      <div class="section-title">
        מקום כתיבה
      </div>
      <div>
        <label [ngClass]="{'checked': writerForm.get(['placeOfWriting', 'place']).value === 'בית'}"
          class="box-checkbox">
          בית
          <input type="radio" formControlName="place" value='בית'>
        </label>
      </div>
      <div>
        <label [ngClass]="{'checked': writerForm.get(['placeOfWriting', 'place']).value === 'אחר'}"
          class="box-checkbox">
          אחר
          <input type="radio" formControlName="place" value='אחר'>
        </label>
      </div>
    </div>
    <div formGroupName="additionalDetails" class="additional-details-section inner-grid">
      <div class="section-title">
        פרטים נוספים
      </div>
      <div>
        <div formGroupName="hasWritenBefore" class="additional-detail inner-grid-2">
          <div class="description">
            כתב ספרים בעבר
          </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'hasWritenBefore'])))"
            class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'hasWritenBefore', 'boolean']).value === 'false'}"
            class="size-checkbox">
            <input type="radio" formControlName="boolean" value='false'>
          </label>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'hasWritenBefore', 'boolean']).value === 'true'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='true'>
          </label>
        </div>
        <div formGroupName="hasWritenKabala" class="additional-detail inner-grid-2">
          <div class="description">
            כתב קבלה
          </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'hasWritenBefore'])))"
            class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'hasWritenKabala', 'boolean']).value === 'false'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='false'>
          </label>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'hasWritenKabala', 'boolean']).value === 'true'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='true'>
          </label>
        </div>
        <div formGroupName="voatsInElection" class="additional-detail inner-grid-2">
          <div class="description">
            בחירות
          </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'voatsInElection'])))"
            class="note"><img src="../../assets/icons/Edit.svg" alt=""></p>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'voatsInElection', 'boolean']).value === 'false'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='false'>
          </label>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'voatsInElection', 'boolean']).value === 'true'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='true'>
          </label>
        </div>
        <div formGroupName="goesToKotel" class="additional-detail inner-grid-2">
          <div class="description">
            הולך לכותל
          </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'goesToKotel'])))"
            class="note">
            <img src="../../assets/icons/Edit.svg" alt="">
          </p>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'goesToKotel', 'boolean']).value === 'false'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='false'>
          </label>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'goesToKotel', 'boolean']).value === 'true'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='true'>
          </label>
        </div>
        <div formGroupName="beginnerWriter" class="additional-detail inner-grid-2">
          <div class="description">
            סופר מתחיל
          </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'beginnerWriter'])))"
            class="note">
            <img src="../../assets/icons/Edit.svg" alt="">
          </p>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'beginnerWriter', 'boolean']).value === 'false'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='false'>
          </label>
          <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'beginnerWriter', 'boolean']).value === 'true'}" class="size-checkbox">
            <input type="radio" formControlName="boolean" value='true'>
          </label>
        </div>
      </div>
      <div>
        <div formGroupName="writerLevel" class="additional-detail inner-grid-2">
          <div class="section-title">
          דרגת סופר
        </div>
          <p (click)="openDialog(HelperAbstractControlToFormGroup(writerForm.get(['additionalDetails', 'writerLevel'])))"
            class="note">
            <img src="../../assets/icons/Edit.svg" alt="">
          </p>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'writerLevel', 'level']).value === '1'}" class="level-checkbox">
              <input type="radio" formControlName="level" value="1">
              1
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'writerLevel', 'level']).value === '2'}" class="level-checkbox">
              <input type="radio" formControlName="level" value="2">
              2
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'writerLevel', 'level']).value === '3'}" class="level-checkbox">
              <input type="radio" formControlName="level" value="3">
              3
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'writerLevel', 'level']).value === '4'}" class="level-checkbox">
              <input type="radio" formControlName="level" value="4">
              4
            </label>
          </div>
          <div>
            <label [ngClass]="{'checked': writerForm.get(['additionalDetails', 'writerLevel', 'level']).value === '5'}" class="level-checkbox">
              <input type="radio" formControlName="level" value="5">
              5
            </label>
          </div>
        </div>
      </div>
    </div>
    <div formArrayName="photos" class="photo-section">
      <label for="addPhoto">
        הוסף תמונה
        <input (change)="onAddPhoto($event.target.files[0])" id="addPhoto" style="display:none;" type="file"
          accept="image/*">
      </label>
      <div *ngFor="let photo of writerForm.controls.photos['controls']">
        <img *ngIf="photo.value" [src]="photo.value" class="img">
      </div>
    </div>
    <div class="recording-section">
      <label *ngIf="!isRecording" for="click" (click)="startRecording()">
        <div>הוסף תזכורת קולית</div>
      </label>
      <div *ngIf="isRecording" (click)="stopRecording()">
        עצור הקלטה
      </div>
      <div *ngIf="hasRecord">
        <div *ngFor="let recording of writerForm.controls.recordings['controls']; let i = index;">
          <div (click)="deleteRecording(i)">מחק הקלטה</div>
          <audio controls *ngIf="recording.value" [src]="sanitizer.bypassSecurityTrustResourceUrl(recording.value)"
            class="img">
          </audio>
        </div>
      </div>
    </div>
    <button [disabled]="writerForm.invalid" (click)="onSubmit()" class="add-sofer-button">הוסף סופר למאגר</button>
  </form>
  <!-- <div>{{ writerForm.value | json }}</div>
  <div>{{ writerForm.valid }}</div> -->

</div>
